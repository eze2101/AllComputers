<div fxLayoutAlign="center center">
  <div class="container" fxLayout="column" fxFlex="80">
    <div class="titulo">
      <h1>{{ titulo }}</h1>
    </div>
    <mat-divider></mat-divider>

    <form
      [formGroup]="miFormulario"
      autocomplete="off"
      fxLayout="row wraps"
      fxLayout.xs="column"
    >
      <div fxFlex="50" fxLayout="column" class="nombres">
        <mat-label>Nombre:</mat-label>
        <mat-form-field appearance="fill">
          <input
            matInput
            formControlName="name"
            placeholder="Nombre del Producto"
          />
        </mat-form-field>

        <mat-label>Precio:</mat-label>
        <mat-form-field appearance="fill">
          <input
            matInput
            type="number"
            formControlName="price"
            placeholder="precio"
          />
        </mat-form-field>

        <mat-label>Unidades disponibles:</mat-label>
        <mat-form-field appearance="fill">
          <input
            matInput
            type="number"
            formControlName="stock"
            placeholder="unidades disponibles"
          />
        </mat-form-field>

        <mat-label>Categoria:</mat-label>
        <mat-form-field appearance="fill">
          <mat-select formControlName="categoria">
            <mat-option
              *ngFor="let categoria of categorias"
              value="{{ categoria.name }}"
              >{{ categoria.name }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>

      <div fxLayout="column" fxLayoutAlign="flex-start center" fxFlex="50">
        <label class="archivo">
          <input
            type="file"
            placeholder="imagen"
            (change)="onFileChange($event)"
            formControlName="file"
          />Seleccionar Imagen
        </label>
        <img *ngIf="image" src="{{ image }}" alt="" />

        <mat-label>Ingrese un nombre único para la imagen:</mat-label>
        <mat-form-field appearance="fill">
          <input
            matInput
            type="text"
            placeholder="Nombre"
            formControlName="img"
          />
        </mat-form-field>
        <span>
          *(si quiere usar una imagen ya existente, coloque el nombre asignado)
        </span>
      </div>
      <div fxFlex="100" fxLayout="column" class="description">
        <mat-label>Descripción</mat-label>
        <mat-form-field appearance="fill" class="descripcion">
          <textarea
            matInput
            type="text"
            formControlName="description"
            placeholder="descripcion"
          ></textarea>
        </mat-form-field>
      </div>
    </form>

    <div *ngIf="!esEditar()" class="botones">
      <button
        mat-button
        (click)="cancelar()"
        fxFlex="30"
        class="boton cancelar"
      >
        Cancelar
      </button>
      <button
        mat-button
        (click)="CrearProducto()"
        fxFlex="30"
        class="boton crear"
      >
        Crear
      </button>
    </div>
    <div *ngIf="esEditar()" class="botones">
      <button
        mat-button
        (click)="cancelar()"
        fxFlex="20"
        class="boton cancelar"
      >
        Cancelar
      </button>
      <button
        mat-button
        (click)="eliminar(producto._id!)"
        fxFlex="20"
        class="boton eliminar"
      >
        Eliminar
      </button>
      <button
        mat-button
        (click)="editarProducto()"
        fxFlex="20"
        class="boton crear"
      >
        Guardar
      </button>
    </div>
  </div>
</div>
